<p-fluid class="w-full justify-center flex flex-col md:my-10 my-3">
  @if (sessionData) {
  <div class="flex w-full items-center justify-center gap-2 text-3xl text-shadow-xs">
    {{ sessionData.title | titlecase }}
    <p-button
      icon="pi pi-pencil"
      title="Edit Title"
      [text]="true"
      size="small"
      (onClick)="openEditDialog()"
    />
  </div>

  <app-session-editor-component
    [(visible)]="showEditDialog"
    [sessionId]="sessionData.id"
    [currentTitle]="sessionData.title"
    (titleUpdated)="onTitleUpdated($event)"
  />

  } 
  

  <div class="flex flex-col gap-2 md:p-5 p-2 my-1 w-full rounded-2xl h-full justify-between overflow-y-scroll">
    <div class="flex flex-col gap-0 rounded-2xl h-full">
      @for (chat of responses; track $index) {
      <div class="flex flex-col w-full h-fit md:my-10 my-5">
        <div
          class="flex gap-5 w-full self-end max-w-4/5 items-baseline p-3 py-2 rounded-xl"
        >
          <div
            class=" text-right break-words min-w-0 flex-1"
          >
          <span class="text-muted-color-emphasis text-xs">{{chat?.create_at | date:'short'}}</span><br/>
            <span class="text-xl">{{ chat?.prompt }}</span>
          </div>
          <p-button
            severity="contrast"
            icon="pi pi-trash"
            [text]="false"
            (onClick)="confirmDeleteChat(chat.id)"
          />
        </div>

        <div class="flex items-baseline gap-2 p-5">
          <i
            [class]="getProviderIcon(chat?.provider)"
            class="text-lg text-primary-900 bg-primary-200 p-1 rounded-full"
          ></i>
          <markdown [data]="chat?.response"></markdown>
        </div>
      </div>
      }
      <div
      class="flex justify-end rounded-2xl p-3"
    >
      <p-button
        label="Delete All"
        severity="contrast"
        icon="pi pi-trash"
        class="m-0"
        (onClick)="
          confirmDeleteSession(
            responses && responses[0] ? responses[0].sessionId : ''
          )
        "
      />
    </div>
    </div>
    
  </div>
</p-fluid>

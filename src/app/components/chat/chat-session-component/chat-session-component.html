<div class="flex flex-col w-full h-full max-w-full max-h-full min-h-fit justify-center md:my-2 my-2 relative md:px-0 px-1 text-lg overflow-y-scroll pb-36">
  @if (sessionData) {
  <div class="flex w-full min-h-fit py-10 px-3 items-baseline justify-between text-start dark:text-blue-300 gap-1 md:text-4xl text-4xl text-shadow-xs font-semibold">
    {{ sessionData.title | titlecase }}
    <p-button
      icon="pi pi-pencil"
      title="Edit Title"
      [text]="true"
      size="small"
      (onClick)="openEditDialog()"
    />
  </div>

  <app-session-editor-component
    [(visible)]="showEditDialog"
    [sessionId]="sessionData.id"
    [currentTitle]="sessionData.title"
    (titleUpdated)="onTitleUpdated($event)"
  />

  } 
  
<p-scrollpanel class="flex flex-col w-full h-full max-h-dvh">
  <!-- <div class="flex flex-col gap-2 md:p-5 p-2 my-1 w-full rounded-2xl h-full justify-between overflow-y-scroll"> -->
    <!-- <div class="flex flex-col gap-0 rounded-2xl h-full"> -->
      @for (chat of responses; track $index) {
      <div class="flex flex-col w-full h-fit">
        <div
          class="flex gap-2 self-end max-w-4/5 items-baseline p-3 rounded-xl bg-stone-50 dark:bg-gray-900"
        >
          <div
            class=" text-right break-words min-w-0 flex-1 p-3 bg-primary-contrast rounded-2xl"
          >
          <span class="text-muted-color-emphasis text-xs">{{chat?.create_at | date:'short'}}</span><br/>
            <span class="bg-primary-contrast">{{ chat?.prompt }}</span>
          </div>
          <p-button
            severity="contrast"
            icon="pi pi-trash"
            [text]="false"
            (onClick)="confirmDeleteChat(chat.id)"
          />
        </div>

        <div class="flex items-baseline gap-2 p-5 pb-0">
          <!-- <i
            [class]="getProviderIcon(chat?.provider)"
            class="text-lg dark:bg-gray-600 text-gray-900 dark:text-primary-200 bg-primary-200 p-1 rounded-full"
          ></i> -->
          <markdown [data]="chat?.response"></markdown>
        </div>
        <app-chat-actions [chat]="chat" (interactionUpdated)="onInteractionUpdated($event)" class="my-3"/>
        <app-chat-share-status [chat]="chat" class="my-3"/>
      </div>
      }
      
    <!-- </div> -->
    
  <!-- </div> -->
  </p-scrollpanel>
  <div
      class="flex justify-end p-3"
    >
      <p-button
        label="Delete All"
        severity="contrast"
        icon="pi pi-trash"
        class="m-0"
        (onClick)="
          confirmDeleteSession(
            responses && responses[0] ? responses[0].sessionId : ''
          )
        "
      />
    </div>
</div>
